main_collective = mcollective
collectives = mcollective
libdir = /usr/share/mcollective/plugins
logger_type = console
loglevel = warn

# Plugins
securityprovider = psk
plugin.psk = unset

<% if @connector == "stomp" %>
connector = stomp
plugin.stomp.host = <%= @connector_host %>
plugin.stomp.port = <%= @connector_port %>
plugin.stomp.user = <%= @connector_user %>
plugin.stomp.password = <%= @connector_password %>

<% elsif @connector == "activemq" %>
connector = activemq
plugin.activemq.pool.size = 1
plugin.activemq.pool.1.host = <%= @connector_host %>
plugin.activemq.pool.1.port = <%= @connector_port %>
plugin.activemq.pool.1.user = <%= @connector_user %>
plugin.activemq.pool.1.password = <%= @connector_password %>

<% elsif @connector == "rabbitmq" %>
connector = rabbitmq
plugin.rabbitmq.vhost = /mcollective
plugin.rabbitmq.pool.size = 1
plugin.rabbitmq.pool.1.host = <%= @connector_host %>
plugin.rabbitmq.pool.1.port = <%= @connector_port %>
plugin.rabbitmq.pool.1.user = <%= @connector_user %>
plugin.rabbitmq.pool.1.password = <%= @connector_password %>

<% end %>

# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml

